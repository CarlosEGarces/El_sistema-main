// Datos de eventos con sus respectivas imágenes
const eventData = {
  "ensayo-2025": {
    title: "Ensayo con Músicos Seleccionados Para la Infantil y Juvenil Nacional",
    date: "Junio 2025",
    images: [
      {
        src: "../img/evento1_1.jpg",

      },
      {
        src: "../img/evento1_2.jpg",
        
      },
      {
        src: "../img/evento1_3.jpg",
        
      },
      {
        src: "../img/evento1_4.jpg",
        
      },
      {
        src: "../img/evento1_5.jpg",
       
      },
      {
        src: "../img/evento1_6.jpg",
        
      },
      {
        src: "../img/evento1_7.jpg",
        
      },
      {
        src: "../img/evento1_8.jpg",
        
      },
      {
        src: "../img/evento1_9.jpg",
        
      },
      {
        src: "../img/evento1_10.jpg",
        
      },
      {
        src: "../img/evento1_11.jpg",
        
      },
    ],
  },

  "50-aniversario": {
    title: "Presentación y Celebración",
    date: "Febrero 2025",
    images: [
      {
        src: "../img/evento2_2.jpg",
        
      },
      {
        src: "../img/evento2_3.jpg",
        
      },
      {
        src: "../img/evento2_4.jpg",
        
      },
      {
        src: "../img/evento2_5.jpg",
       
      },
    ],
  },
  "concierto-alma-llanera": {
    title: "Presentación del Programa Alma Llanera",
    date: "Diciembre 2023",
    images: [
      {
        src: "../img/evento3_1.jpg",

      },
      {
        src: "../img/evento3_2.jpg",
        
      },
      {
        src: "../img/evento3_3.jpg",
        
      },
      {
        src: "../img/evento3_4.jpg",
        
      },
      {
        src: "../img/evento3_5.jpg",
       
      },
      {
        src: "../img/evento3_7.jpg",
        
      },
      {
        src: "../img/evento3_8.jpg",
        
      },
      {
        src: "../img/evento3_9.jpg",
        
      },
      {
        src: "../img/evento3_10.jpg",
        
      },
      {
        src: "../img/evento3_11.jpg",
        
      },
      {
        src: "../img/evento3_12.JPG",

      },
      {
        src: "../img/evento3_14.JPG",
        
      },
    ],
  },
  "concierto-orinokia-mall": {
    title: "Música en la Comunidad",
    date: "Noviembre 2023",
    images: [
      {
        src: "../img/evento4_1.jpg",

      },
      {
        src: "../img/evento4_2.jpg",
        
      },
      {
        src: "../img/evento4_3.jpg",
        
      },
      {
        src: "../img/evento4_4.jpg",
        
      },
      {
        src: "../img/evento4_5.jpg",
       
      },
      {
        src: "../img/evento4_6.jpg",
        
      },
      {
        src: "../img/evento4_7.jpg",
        
      },
      {
        src: "../img/evento4_8.jpg",
        
      },
      {
        src: "../img/evento4_9.jpg",
        
      },
      {
        src: "../img/evento4_10.jpg",
        
      },
      {
        src: "../img/evento4_11.jpg",
        
      },
      {
        src: "../img/evento4_12.jpg",

      },
      {
        src: "../img/evento4_13.jpg",
        
      },
      {
        src: "../img/evento4_14.jpg",
        
      },
      {
        src: "../img/evento4_15.jpg",
        
      },
      {
        src: "../img/evento4_16.jpg",
       
      },
      {
        src: "../img/evento4_17.jpg",
        
      },
      {
        src: "../img/evento4_18.jpg",
        
      },
      {
        src: "../img/evento4_19.jpg",
        
      },
    ],
  },
  "concierto-navideno": {
    title: "Hotel Plaza Merú: Encendido del Arbolito",
    date: "Diciembre 2024",
    images: [
      {
        src: "../img/evento5_1.jpg",

      },
      {
        src: "../img/evento5_2.jpg",
        
      },
    ],
  },

  "concierto-orquesta-pre-infantil": {
    title: "Concierto Orquesta Pre-Infantil",
    date: "2024",
    images: [
      {
        src: "../img/evento6_8.JPG",
        
      },
      {
        src: "../img/evento6_9.JPG",
        
      },
      {
        src: "../img/evento6_10.JPG",
        
      },
      {
        src: "../img/evento6_11.JPG",
        
      },
      {
        src: "../img/evento6_12.JPG",

      },
      {
        src: "../img/evento6_13.JPG",
        
      },
      {
        src: "../img/evento6_14.JPG",
        
      },
      {
        src: "../img/evento6_15.JPG",
        
      },
      {
        src: "../img/evento6_16.JPG",
       
      },
      {
        src: "../img/evento6_17.JPG",
        
      },
      {
        src: "../img/evento6_18.JPG",
        
      },
      {
        src: "../img/evento6_19.JPG",
        
      },
      {
        src: "../img/evento6_20.JPG",
        
      },
      {
        src: "../img/evento6_21.JPG",
        
      },
      {
        src: "../img/evento6_22.JPG",
        
      },
      {
        src: "../img/evento6_23.JPG",

      },
      {
        src: "../img/evento6_24.JPG",
        
      },
      {
        src: "../img/evento6_25.JPG",
        
      },
      {
        src: "../img/evento6_26.JPG",
        
      },
      {
        src: "../img/evento6_27.JPG",
       
      },
      {
        src: "../img/evento6_28.JPG",
        
      },
      {
        src: "../img/evento6_29.JPG",
        
      },
      {
        src: "../img/evento6_30.JPG",
        
      },
      {
        src: "../img/evento6_31.JPG",
        
      },
      {
        src: "../img/evento6_32.JPG",
        
      },
      {
        src: "../img/evento6_33.JPG",
        
      },
      {
        src: "../img/evento6_34.JPG",

      },
      {
        src: "../img/evento6_35.JPG",
        
      },
      {
        src: "../img/evento6_36.JPG",
        
      },
      {
        src: "../img/evento6_37.JPG",
        
      },
      {
        src: "../img/evento6_38.JPG",
       
      },
      {
        src: "../img/evento6_39.JPG",
        
      },
      {
        src: "../img/evento6_40.JPG",
        
      },
      {
        src: "../img/evento6_41.JPG",
        
      },
      {
        src: "../img/evento6_42.JPG",
        
      },
      {
        src: "../img/evento6_43.JPG",
        
      },
      {
        src: "../img/evento6_44.JPG",
        
      },
      {
        src: "../img/evento6_45.JPG",

      },
      {
        src: "../img/evento6_46.JPG",
        
      },
      {
        src: "../img/evento6_47.JPG",
        
      },
      {
        src: "../img/evento6_48.JPG",
        
      },
      {
        src: "../img/evento6_49.JPG",
       
      },
      {
        src: "../img/evento6_50.JPG",
        
      },
      {
        src: "../img/evento6_51.JPG",
        
      },
    ],
  },
}

let currentEventImages = []
let currentImageIndex = 0

document.addEventListener("DOMContentLoaded", () => {
  // Inicializar la galería de eventos
  initEventGallery()

  // Inicializar modal de imágenes
  initImageModal()

  // Inicializar cambio de vista de la galería
  initGalleryViewToggle()

  // Inicializar animaciones al hacer scroll
  initScrollAnimations()
})

// Función para inicializar la galería de eventos
function initEventGallery() {
  const eventCards = document.querySelectorAll(".event-card")
  const eventsView = document.getElementById("events-view")
  const galleryView = document.getElementById("gallery-view")
  const backToEventsBtn = document.getElementById("back-to-events")

  // Event listeners para las tarjetas de eventos
  eventCards.forEach((card) => {
    card.addEventListener("click", function () {
      const eventId = this.getAttribute("data-event")
      showEventGallery(eventId)
    })
  })

  // Event listener para volver a la vista de eventos
  backToEventsBtn.addEventListener("click", () => {
    showEventsView()
  })

  function showEventGallery(eventId) {
    const eventInfo = eventData[eventId]
    if (!eventInfo) return

    // Actualizar información del evento
    document.getElementById("current-event-title").textContent = eventInfo.title
    document.getElementById("current-event-date").textContent = eventInfo.date

    // Cargar imágenes del evento
    loadEventImages(eventInfo.images)

    // Cambiar vista
    eventsView.style.display = "none"
    galleryView.style.display = "block"

    // Scroll al inicio
    window.scrollTo(0, 0)
  }

  function showEventsView() {
    eventsView.style.display = "block"
    galleryView.style.display = "none"

    // Scroll al inicio
    window.scrollTo(0, 0)
  }
}

// Función para cargar imágenes de un evento específico
function loadEventImages(images) {
  const galleryContainer = document.getElementById("gallery-container")
  currentEventImages = images

  // Limpiar galería
  galleryContainer.innerHTML = ""

  // Crear elementos de imagen
  images.forEach((image, index) => {
    const galleryItem = document.createElement("div")
    galleryItem.className = "gallery-item animate-on-scroll"
    galleryItem.setAttribute("data-animation", "fadeIn")
    galleryItem.setAttribute("data-delay", (index * 100).toString())

    galleryItem.innerHTML = `
      <div class="gallery-image">
        <img src="${image.src}" alt="${image.title}">
        <div class="image-overlay">
          <div class="overlay-content">
            <button class="expand-btn" data-index="${index}">
              <i class="fas fa-expand"></i>
            </button>
          </div>
        </div>
      </div>
    `

    galleryContainer.appendChild(galleryItem)
  })

  // Reinicializar event listeners para las nuevas imágenes
  initImageModal()

  // Reinicializar animaciones
  initScrollAnimations()
}

// Función para inicializar el modal de imágenes
function initImageModal() {
  const expandButtons = document.querySelectorAll(".expand-btn")
  const modal = document.getElementById("image-modal")
  const modalImage = document.getElementById("modal-image")
  const modalTitle = document.getElementById("modal-title")
  const modalDescription = document.getElementById("modal-description")
  const closeModal = document.querySelector(".close-modal")
  const prevButton = document.querySelector(".prev-image")
  const nextButton = document.querySelector(".next-image")

 // Función para abrir el modal
  function openModal(index) {
      if (currentEventImages.length === 0) return;
      currentImageIndex = index;
      const image = currentEventImages[currentImageIndex];
      modalImage.src = image.src;
      modalTitle.textContent = image.title;
      modalDescription.textContent = image.description;
      modal.style.display = "block";
      document.body.style.overflow = "hidden";
      // Ocultar el botón de modo diurno/nocturno
      const themeToggleButton = document.getElementById("theme-toggle");
      themeToggleButton.style.visibility = "hidden";
      // Añadir animación de entrada
      modalImage.style.opacity = "0";
      setTimeout(() => {
          modalImage.style.opacity = "1";
          modalImage.style.transition = "opacity 0.5s ease";
      }, 100);
  }
  // Función para cerrar el modal
  function closeModalFunc() {
      modal.style.display = "none";
      document.body.style.overflow = "";
      // Mostrar el botón de modo diurno/nocturno
      const themeToggleButton = document.getElementById("theme-toggle");
      themeToggleButton.style.visibility = "visible";
  }

  // Función para mostrar la imagen anterior
  function showPrevImage() {
    currentImageIndex = (currentImageIndex - 1 + currentEventImages.length) % currentEventImages.length
    updateModalImage()
  }

  // Función para mostrar la siguiente imagen
  function showNextImage() {
    currentImageIndex = (currentImageIndex + 1) % currentEventImages.length
    updateModalImage()
  }

  // Función para actualizar la imagen del modal
  function updateModalImage() {
    const image = currentEventImages[currentImageIndex]

    // Añadir animación de transición
    modalImage.style.opacity = "0"
    setTimeout(() => {
      modalImage.src = image.src
      modalTitle.textContent = image.title
      modalDescription.textContent = image.description
      modalImage.style.opacity = "1"
    }, 250)
  }

  // Event listeners
  expandButtons.forEach((button) => {
    button.addEventListener("click", function (e) {
      e.stopPropagation()
      const index = Number.parseInt(this.getAttribute("data-index"))
      openModal(index)
    })
  })

  closeModal.addEventListener("click", closeModalFunc)
  prevButton.addEventListener("click", showPrevImage)
  nextButton.addEventListener("click", showNextImage)

  // Cerrar modal con tecla Escape
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && modal.style.display === "block") {
      closeModalFunc()
    }
  })

  // Navegación con teclado
  document.addEventListener("keydown", (e) => {
    if (modal.style.display === "block") {
      if (e.key === "ArrowLeft") {
        showPrevImage()
      } else if (e.key === "ArrowRight") {
        showNextImage()
      }
    }
  })

  // Cerrar modal al hacer clic fuera de la imagen
  modal.addEventListener("click", (e) => {
    if (e.target === modal) {
      closeModalFunc()
    }
  })
}

// Función para inicializar el cambio de vista de la galería
function initGalleryViewToggle() {
  const viewButtons = document.querySelectorAll(".view-btn")
  const galleryGrid = document.getElementById("gallery-container")

  viewButtons.forEach((button) => {
    button.addEventListener("click", function () {
      // Remover clase activa de todos los botones
      viewButtons.forEach((btn) => {
        btn.classList.remove("active")
      })

      // Añadir clase activa al botón clickeado
      this.classList.add("active")

      // Obtener la vista seleccionada
      const view = this.getAttribute("data-view")

      // Cambiar la vista de la galería
      if (view === "grid") {
        galleryGrid.classList.remove("masonry")
        // Resetear los estilos de altura para la vista de cuadrícula
        document.querySelectorAll(".gallery-item").forEach((item) => {
          item.style.gridRowEnd = ""
        })
      } else if (view === "masonry") {
        galleryGrid.classList.add("masonry")
        // Inicializar el layout de mosaico
        setTimeout(initMasonryLayout, 100)
      }
    })
  })
}

// Función para inicializar el layout de mosaico
function initMasonryLayout() {
  const galleryGrid = document.getElementById("gallery-container")
  if (!galleryGrid.classList.contains("masonry")) return

  const items = galleryGrid.querySelectorAll(".gallery-item")

  items.forEach((item) => {
    const img = item.querySelector("img")
    if (img.complete) {
      setMasonryItemHeight(item, img)
    } else {
      img.addEventListener("load", () => {
        setMasonryItemHeight(item, img)
      })
    }
  })
}

// Función para establecer la altura del elemento en el layout de mosaico
function setMasonryItemHeight(item, img) {
  const aspectRatio = img.naturalHeight / img.naturalWidth
  const spans = Math.ceil(aspectRatio * 20)
  item.style.gridRowEnd = `span ${spans}`
}

// Función para inicializar las animaciones al hacer scroll
function initScrollAnimations() {
  const animatedElements = document.querySelectorAll(".animate-on-scroll")

  // Función para verificar si un elemento está en el viewport
  function isElementInViewport(el) {
    const rect = el.getBoundingClientRect()
    return rect.top <= (window.innerHeight || document.documentElement.clientHeight) * 0.85
  }

  // Función para animar elementos visibles
  function animateElementsInView() {
    animatedElements.forEach((element) => {
      if (isElementInViewport(element) && !element.classList.contains("animated")) {
        // Obtener el tipo de animación y el retraso
        const animation = element.dataset.animation || "fadeIn"
        const delay = Number.parseInt(element.dataset.delay || 0)

        // Aplicar el retraso
        setTimeout(() => {
          element.classList.add("animated")
          element.style.opacity = "1"
          element.style.transform = "translateY(0)"
          element.style.animationName = animation
        }, delay)
      }
    })
  }

  // Verificar elementos al cargar la página
  animateElementsInView()

  // Verificar elementos al hacer scroll
  window.addEventListener("scroll", animateElementsInView)
}

console.log("Galería de imágenes con eventos cargada correctamente")
